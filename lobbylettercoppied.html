<!DOCTYPE html>
<html lang ="en">


<head>
    <meta charset = "utf-8">
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" type="text/css" href="icare2.css">

    <title>iCare</title>
</head>

<body>

  <header>
      <h1> iCare About... </h1>
  </header>

    <div id = "letter">
      <p> March 1, 2020</p>
      <form action="pdphp.php" method="post">
      <form action="/action_page.php">
        <label for="lname">Name: </label>
        <input type="text" id="lname" name="lname"><br>
        <label for="fname">Email:</label>
        <input type="text" id="fname" name="fname"><br>
        <p> Dear Representative, </p>
        <p> I am a California constituent in the San Francisco area. Recently, I have become very concerned
        about legislative impact on Coronavirus. As a parent yourself, I am sure that you share many of
        these concerns. </p>
        <p> As a California resident, I am concerned about the possible spread of the coronavirus across our
        borders.  We write to ask how your agency is prepared to address the threat presented by the
        coronavirus at U.S. borders.  </p>
        <label for="lname">I ask that you support </label>
        <input type="text" id="lname" name="lname">
        <p> All citizens should have the opportunity to be healthy now and in the future. I believe that in
        supporting this bill you will impact the lives of countless children and elderly.
        I respectfully seek answers to these questions about coronavirus safety. It is imperative that your
        agency members are protected and that local officials in border states are informed. I would be
        grateful for any update that you can provide. </p>
        <p> Sincerely, </p>
        <input type=button onClick="handlerSubmit()" value='Submit'>
        <input type=button onClick="location.href='thankyoupage.html'" value='Done'>
      </form>

    </div>
    <aside>
      <div>
      <br>
      <img src="kami.jpg"alt="Senator Jenny Jones" height="20%" class="center">
      <br>
      <br>
      <div id= "text">
      <b><p>Senator Jenny Jones</p>
      </b>
      <p>Her values are: Peace, No Guns and Pro Womens rights. She has a track record of </p>
      <p>Jenny is waiting for your letter!</p>
      <br>
    </div>
    </aside>
    </aside>

    <footer>
        <br>Copyright &copy; 2020 Icare
        <br> <br>
    </footer>
    <script>
    function generateContent(params) {
      return `
    March 1, 2020

    Dear Representative,

    I am a California constituent in the San Francisco area. Recently, I have become very concerned about legislative impact on Coronavirus. As a parent yourself, I am sure that you share many of these concerns.

    As a California resident, I am concerned about the possible spread of the coronavirus across our borders.  We write to ask how your agency is prepared to address the threat presented by the coronavirus at U.S. borders.

    I ask that you support ${params.support}

    All citizens should have the opportunity to be healthy now and in the future. I believe that in supporting this bill you will impact the lives of countless children and elderly.

    I respectfully seek answers to these questions about coronavirus safety. It is imperative that your agency members are protected and that local officials in border states are informed. I would be  grateful for any update that you can provide.

    Sincerely,

    ${params.name}

    `
    };


    function handlerSubmit() {
    // get values from inputs
    // call generateContent
        var message = generateContent({
            name: document.getElementById("name").value,
            email: document.getElementById("email").value,
            support: document.getElementById("support").value,
        });
        document.getElementById('output').innerHTML = message;
        // send message to server
        console.log(message);
    }

    var nodemailer = require('nodemailer');

    var transporter = nodemailer.createTransport({
      service: 'gmail',
      auth: {
        user: 'carrielin23@gmail.com',
        pass: 'DRew23!!'
      }
    });

    var mailOptions = {
      from: 'carrielin23@gmail.com',
      to: 'preetin238@gmail.com',
      subject: 'Letter from constituent Coronavirus',
      text: message
    };

    transporter.sendMail(mailOptions, function(error, info){
      if (error) {
        console.log(error);
      } else {
        console.log('Email sent: ' + info.response);
      }
    });

    </script>
</body>
</html>
